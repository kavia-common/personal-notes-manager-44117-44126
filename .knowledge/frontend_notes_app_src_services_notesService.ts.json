{"is_source_file": true, "format": "TypeScript", "description": "This file defines a React hook `useNotesService` that provides state management and CRUD operations for notes in a personal notes application. It includes functions for loading, creating, updating, and deleting notes, with fallback to local storage if backend API calls fail. It also initializes demo notes if the notes list is empty.", "external_files": ["../utils/storage", "../utils/uuid", "./optionalApiClient"], "external_methods": ["getItem", "setItemDebounced", "uuid", "apiClient.listNotes", "apiClient.createNote", "apiClient.updateNote", "apiClient.deleteNote"], "published": ["useNotesService", "Note"], "classes": [], "methods": [{"name": "export function useNotesService() { useNotesService", "description": "Provides notes state and CRUD operations, managing local storage fallback and optional backend integration.", "scope": "", "scopeKind": ""}], "calls": ["useState", "useMemo", "useCallback", "getItem", "setItemDebounced", "uuid", "apiClient.listNotes", "apiClient.createNote", "apiClient.updateNote", "apiClient.deleteNote", "Date.now"], "search-terms": ["useNotesService", "Note type", "localStorage fallback", "Notes CRUD", "React hook", "TypeScript"], "state": 2, "file_id": 22, "knowledge_revision": 46, "git_revision": "", "ctags": [{"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^export type Note = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^const STORAGE_KEY = 'notes_app:v1:notes';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "backendEnabled", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^  const backendEnabled = useMemo(() => !!apiClient, []);$/", "language": "TypeScript", "kind": "constant", "scope": "useNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^  const createNote = useCallback(async (partial: Omit<Partial<Note>, 'id'>) => {$/", "language": "TypeScript", "kind": "constant", "scope": "useNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "created", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^        const created = await apiClient.createNote(n);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^  const deleteNote = useCallback(async (id: string) => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "loadNotes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^  const loadNotes = useCallback(async () => {$/", "language": "TypeScript", "kind": "constant", "scope": "useNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^        const next = notes.map((n) => (n.id === id ? saved : n));$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^    const next = [n, ...notes];$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^    const next = notes.filter((n) => n.id !== id);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^    const next = notes.map((n) => (n.id === id ? updated : n));$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^  const [notes, setNotes] = useState<Note[]>([]);$/", "language": "TypeScript", "kind": "constant", "scope": "useNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "persist", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^  const persist = useCallback((data: Note[]) => {$/", "language": "TypeScript", "kind": "constant", "scope": "useNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "saved", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^        const saved = await apiClient.updateNote(id, updated);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "seedIfEmpty", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^  const seedIfEmpty = useCallback(() => {$/", "language": "TypeScript", "kind": "constant", "scope": "useNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "setNotes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^  const [notes, setNotes] = useState<Note[]>([]);$/", "language": "TypeScript", "kind": "constant", "scope": "useNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^  const updateNote = useCallback(async (id: string, changes: Partial<Note>) => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^    const updated: Note = { ...current, ...changes, updatedAt: Date.now() };$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^    const updated: Note = { ...current, ...changes, updatedAt: Date.now() };$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "useNotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-44117-44126/frontend_notes_app/src/services/notesService.ts", "pattern": "/^export function useNotesService() {$/", "language": "TypeScript", "kind": "function"}], "hash": "7cf4868e86f556a71f05d2883a015f20", "format-version": 4, "code-base-name": "frontend_notes_app", "filename": "frontend_notes_app/src/services/notesService.ts", "revision_history": [{"46": ""}]}